<?xml version='1.0' encoding='utf-8'?>
{{ if eq .Operation "explain" }}
<sruResponse:explainResponse xmlns:sruResponse="http://docs.oasis-open.org/ns/search-ws/sruResponse">
  <sruResponse:version>2.0</sruResponse:version>
  {{ if gt ( len .General.Errors ) 0 }}
    <sruResponse:recordData>
        {{ template "explain.xml" .Explain }}
    </sruResponse:recordData>
    {{ template "diagnostics.xml" .General.Errors }}
  {{ end }}
  {{ if not .General.Fatal }}
    <sruResponse:record>
      <sruResponse:recordSchema>http://explain.z3950.org/dtd/2.0/</sruResponse:recordSchema>
      <sruResponse:recordXMLEscaping>xml</sruResponse:recordXMLEscaping>
      <sruResponse:recordData>
          {{ template "explain.xml" .Explain }}
      </sruResponse:recordData>
    </sruResponse:record>
    {{ if .Explain.ExtraResponseData }}
    <sruResponse:extraResponseData>
      {{ template "description.xml" . }}
    </sruResponse:extraResponseData>
    {{ end }}
  {{ end }}
</sruResponse:explainResponse>
{{ else }}{{ if eq .Operation "searchRetrieve" }}
<sruResponse:searchRetrieveResponse xmlns:sruResponse="http://docs.oasis-open.org/ns/search-ws/sruResponse">
  <sruResponse:version>2.0</sruResponse:version>
  <sruResponse:numberOfRecords>{{ .SearchRetrieve.Results | len }}</sruResponse:numberOfRecords>
  {{ if gt ( len .General.Errors ) 0 }}
    {{ template "diagnostics.xml" .General.Errors }}
  {{ end }}
  {{ if not .General.Fatal }}
    {{ template "searchret.xml" .SearchRetrieve }}
  {{ end }}
  <sruResponse:resultCountPrecision>info:srw/vocabulary/resultCountPrecision/1/exact</sruResponse:resultCountPrecision>
</sruResponse:searchRetrieveResponse>
{{ end }}{{ end }}